generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model alat {
  ID_ALAT          String       @id @db.VarChar(5)
  NAMA_ALAT        String?      @db.VarChar(30)
  JUMLAH_ALAT      Int
  UNIT_ALAT        String?      @db.VarChar(35)
  ALAT_LAYAK       Int          @default(0) @db.Int
  ALAT_TIDAK_LAYAK Int          @default(0) @db.Int
  permintaan       permintaan[]
}

model bahan {
  ID_BAHAN    String       @id @db.VarChar(4)
  NAMA_BAHAN  String?      @db.VarChar(30)
  STOCK_BAHAN Int?         @db.Int
  UNIT_BAHAN  String?      @db.VarChar(10)
  permintaan  permintaan[]
}

model detail_permintaan {
  ID_DETAIL_PERMINTAAN Int         @id @default(autoincrement())
  ID_PERMINTAAN        Int?        @unique
  permintaan           permintaan?

  @@index([ID_PERMINTAAN], map: "FK_RELATIONSHIP_4")
}

model permintaan {
  ID_PERMINTAAN        Int                @id @default(autoincrement())
  ID_DETAIL_PERMINTAAN Int?               @unique
  ID_USER              Int?
  TGL_PERMINTAAN       DateTime?          @default(now()) @db.Date
  STATUS               STATUS_PERMINTAAN? @default(PENDING)
  detail_permintaan    detail_permintaan? @relation(fields: [ID_DETAIL_PERMINTAAN], references: [ID_DETAIL_PERMINTAAN], onDelete: Cascade)
  user                 user?              @relation(fields: [ID_USER], references: [ID_USER], onDelete: Restrict, onUpdate: Restrict, map: "FK_RELATIONSHIP_1")
  alat                 alat[]
  bahan                bahan[]

  @@index([ID_USER], map: "FK_RELATIONSHIP_1")
}

model user {
  ID_USER    Int          @id @default(autoincrement())
  NAME       String?      @db.VarChar(35)
  USERNAME   String?      @db.VarChar(25)
  PASSWORD   String?      @db.VarChar(25)
  ROLE       String?      @db.VarChar(30)
  REGISTER   DateTime?    @db.Date
  permintaan permintaan[]
}

enum STATUS_PERMINTAAN {
  PENDING
  DIVERIFIKASI
  DITERIMA
}
